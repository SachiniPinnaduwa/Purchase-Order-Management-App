<mat-card>
  <mat-card-header>
    <mat-card-title
      >{{ isEditMode ? "Edit" : "Create" }} Purchase Order</mat-card-title
    >
  </mat-card-header>

  <mat-card-content>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>Description</mat-label>
          <input matInput formControlName="poDescription" required />
          <mat-error *ngIf="form.get('poDescription')?.hasError('required')">
            Description is required
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>Supplier</mat-label>
          <input matInput formControlName="supplierName" required />
          <mat-error *ngIf="form.get('supplierName')?.hasError('required')">
            Supplier is required
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>Order Date</mat-label>
          <input
            matInput
            [matDatepicker]="picker"
            formControlName="orderDate"
            required
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
          <mat-error *ngIf="form.get('orderDate')?.hasError('required')">
            Date is required
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>Amount</mat-label>
          <input
            matInput
            type="number"
            formControlName="totalAmount"
            min="0.01"
            step="0.01"
            required
          />
          <span matTextPrefix>$&nbsp;</span>
          <mat-error *ngIf="form.get('totalAmount')?.hasError('required')">
            Amount is required
          </mat-error>
          <mat-error *ngIf="form.get('totalAmount')?.hasError('min')">
            Must be greater than 0
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row" *ngIf="isEditMode">
        <mat-form-field appearance="outline">
          <mat-label>Status</mat-label>
          <mat-select formControlName="status" required>
            <mat-option *ngFor="let status of statusOptions" [value]="status">
              {{ status }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="button-row">
        <button mat-raised-button color="primary" type="submit">
          {{ isEditMode ? "Update" : "Create" }}
        </button>
        <button mat-button type="button" routerLink="/purchase-orders">
          Cancel
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
